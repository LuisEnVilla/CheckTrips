mixin sumas(viaje,viaticos,hospedaje)
	-var sum = 0
	-var items = [viaje,viaticos,hospedaje]
	each i in items
		if !isNaN(i)
			- sum += i
	| #{sum}
extends layout

block content
	include header
	.container-fluid
		.row
			.container

	.container
		.row
			.col-md-8.col-md-offset-2
				.row#top
				h2.top-title Viajes más recientes
			.row
				each viaje, i in fecha
					.col-md-4
						.card.small
							.card-img
								if viaje.Tipo == "Nacional"
									h4 #{viaje.Origen.Estado} <i class="glyphicon glyphicon-chevron-right"></i>  #{viaje.Destino.Estado}
								else
									h4 #{viaje.Origen.Pais} <i class="glyphicon glyphicon-send"></i>  #{viaje.Destino.Pais}
							.card-content
								dl.dl-horizontal
									dt: span.glyphicon.glyphicon-bookmark 
									dd #{viaje.Tema}
									dt: span.glyphicon.glyphicon-user
									dd: a(href='funcionario/' + viaje.Funcionario_id._id) #{viaje.Funcionario_id.Nombre.Nombres} #{viaje.Funcionario_id.Nombre.ApellidoP }
									dt: span.glyphicon.glyphicon-briefcase
									dd #{viaje.Funcionario_id.Trabajo.UnidadAdministrativa}
									dt: span.glyphicon.glyphicon-file
									dd #{viaje.Consecutivo}
									dt: span.glyphicon.glyphicon-calendar
									dd #{viaje.FechaInicio}
							.card-control
								span.compare-icon.glyphicon.glyphicon-check.pull-left(id=viaje.Consecutivo)
								a.flat-btn.pull-right(href ="/profile/" + viaje.Consecutivo) Ver más
			.row
				h2.top-title Viajes más costosos en traslado
			.row
				each viaje, i in viajes
					.col-md-4
						.card.small
							.card-img
								if viaje.Tipo == "Nacional"
									h4 #{viaje.Origen.Estado} <i class="glyphicon glyphicon-chevron-right"></i>  #{viaje.Destino.Estado}
								else
									h4 #{viaje.Origen.Pais} <i class="glyphicon glyphicon-send"></i>  #{viaje.Destino.Pais}
							.card-content
								dl.dl-horizontal
									dt: span.glyphicon.glyphicon-bookmark 
									dd #{viaje.Tema}
									dt: span.glyphicon.glyphicon-user
									dd: a(href="funcionario/" + viaje.Funcionario_id._id) #{viaje.Funcionario_id.Nombre.Nombres} #{viaje.Funcionario_id.Nombre.ApellidoP }
									dt: span.glyphicon.glyphicon-briefcase
									dd #{viaje.Funcionario_id.Trabajo.UnidadAdministrativa}
									dt: span.glyphicon.glyphicon-file
									dd #{viaje.Consecutivo}
									dt: span.glyphicon.glyphicon-usd
									dd
										+sumas(viaje.GastoPasaje,viaje.GastosViaticos,viaje.CostoHospedaje)
							.card-control
								span.compare-icon.glyphicon.glyphicon-check.pull-left(id=viaje.Consecutivo)
								a.flat-btn.pull-right(href ="/profile/" + viaje.Consecutivo) Ver más
			.row
				h2.top-title Viajes más costosos en viaticos
			.row
				each viaje, i in viajes2
					.col-md-4
						.card.small
							.card-img
								if viaje.Tipo == "Nacional"
									h4 #{viaje.Origen.Estado} <i class="glyphicon glyphicon-chevron-right"></i>  #{viaje.Destino.Estado}
								else
									h4 #{viaje.Origen.Pais} <i class="glyphicon glyphicon-send"></i>  #{viaje.Destino.Pais}
							.card-content
								dl.dl-horizontal
									dt: span.glyphicon.glyphicon-bookmark 
									dd #{viaje.Tema}
									dt: span.glyphicon.glyphicon-user
									dd: a(href="funcionario/" + viaje.Funcionario_id._id) #{viaje.Funcionario_id.Nombre.Nombres} #{viaje.Funcionario_id.Nombre.ApellidoP }
									dt: span.glyphicon.glyphicon-briefcase
									dd #{viaje.Funcionario_id.Trabajo.UnidadAdministrativa}
									dt: span.glyphicon.glyphicon-file
									dd #{viaje.Consecutivo}
									dt: span.glyphicon.glyphicon-usd
									dd
										+sumas(viaje.GastoPasaje,viaje.GastosViaticos,viaje.CostoHospedaje)
							.card-control
								span.compare-icon.glyphicon.glyphicon-check.pull-left(id=viaje.Consecutivo)
								a.flat-btn.pull-right(href ="/profile/" + viaje.Consecutivo) Ver más

